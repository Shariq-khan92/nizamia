-- Add these models to your server/prisma/schema.prisma file
-- After the existing Designation model

model CompanySettings {
  id             String   @id @default(uuid())
  organizationId String
  taxRate        Float?
  cottonRate     Float?
  currencyRates  String?  // JSON string: {"USD": 1, "EUR": 0.92, "GBP": 0.79}
  lastUpdated    DateTime?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model SalesTerms {
  id             String   @id @default(uuid())
  organizationId String
  name           String   // e.g., "Default Sales Terms", "Bulk Order Terms"
  content        String   @db.Text
  isDefault      Boolean  @default(false)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model POTerms {
  id             String   @id @default(uuid())
  organizationId String
  name           String
  content        String   @db.Text
  isDefault      Boolean  @default(false)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model MonthlyTarget {
  id             String   @id @default(uuid())
  organizationId String
  month          String
  salesTarget    Float
  volumeTarget   Float
  year           Int      @default(2026)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  
  @@unique([organizationId, month, year])
}

model Location {
  id             String   @id @default(uuid())
  organizationId String
  name           String   @unique
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model ThreadOperation {
  id             String   @id @default(uuid())
  organizationId String
  category       String   // e.g., "Tops", "Bottoms", "Universal"
  name           String   // e.g., "Front Rise", "Shoulder Join"
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model MachineFactor {
  id             String   @id @default(uuid())
  organizationId String
  machineType    String   @unique // e.g., "Lockstitch", "Overlock / Serger"
  factor         Float    // e.g., 2.5, 3.5
  description    String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model GarmentTemplate {
  id             String   @id @default(uuid())
  organizationId String
  name           String   // e.g., "Jeans", "Jacket", "Shirt"
  description    String?
  GarmentTemplateStep GarmentTemplateStep[]
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model GarmentTemplateStep {
  id             String   @id @default(uuid())
  templateId     String
  template       GarmentTemplate @relation(fields: [templateId], references: [id], onDelete: Cascade)
  stepOrder      Int
  operation      String
  machineType    String
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model ProductionLine {
  id             String   @id @default(uuid())
  organizationId String
  name           String
  description    String?
  isActive       Boolean  @default(true)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model PackingInstruction {
  id             String   @id @default(uuid())
  organizationId String
  name           String
  content        String   @db.Text
  isDefault      Boolean  @default(false)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model ProcessStep {
  id             String   @id @default(uuid())
  organizationId String
  name           String
  description    String?
  sequenceOrder  Int
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}
